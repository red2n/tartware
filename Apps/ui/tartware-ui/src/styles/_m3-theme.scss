/**
 * Material Design 3 (M3) Theme Configuration
 * Reference: https://m3.material.io/
 */

@use '@angular/material' as mat;

// Include M3 core styles
@include mat.core();

// Define M3 Primary Palette (Indigo)
$tartware-primary: mat.m2-define-palette(mat.$m2-indigo-palette, 500);
$tartware-accent: mat.m2-define-palette(mat.$m2-blue-palette, 600);
$tartware-warn: mat.m2-define-palette(mat.$m2-red-palette, 500);

// Create Light Theme (M3)
$tartware-light-theme: mat.m2-define-light-theme((
  color: (
    primary: $tartware-primary,
    accent: $tartware-accent,
    warn: $tartware-warn,
  ),
  typography: mat.m2-define-typography-config(
    $font-family: 'Roboto, "Helvetica Neue", sans-serif',
  ),
  density: 0,
));

// Apply M3 theme to all components
@include mat.all-component-themes($tartware-light-theme);

// Create Dark Theme (M3)
$tartware-dark-theme: mat.m2-define-dark-theme((
  color: (
    primary: $tartware-primary,
    accent: $tartware-accent,
    warn: $tartware-warn,
  ),
));

// Dark theme class
.dark-theme {
  @include mat.all-component-colors($tartware-dark-theme);

  // Custom dark theme variables
  --surface: #1c1b1f;
  --on-surface: #e6e1e5;
  --surface-variant: #49454f;
  --on-surface-variant: #cac4d0;
  --background: #1c1b1f;
  --on-background: #e6e1e5;

  background-color: var(--surface);
  color: var(--on-surface);
}

// M3 Design Tokens
:root {
  // Surface colors (light theme)
  --md-sys-color-surface: #fef7ff;
  --md-sys-color-surface-variant: #e7e0ec;
  --md-sys-color-on-surface: #1d1b20;
  --md-sys-color-on-surface-variant: #49454f;
  --md-sys-color-surface-container-lowest: #ffffff;
  --md-sys-color-surface-container-low: #f7f2fa;
  --md-sys-color-surface-container: #f3edf7;
  --md-sys-color-surface-container-high: #ece6f0;
  --md-sys-color-surface-container-highest: #e6e0e9;

  // Primary colors
  --md-sys-color-primary: #6750a4;
  --md-sys-color-on-primary: #ffffff;
  --md-sys-color-primary-container: #eaddff;
  --md-sys-color-on-primary-container: #21005d;

  // Secondary colors
  --md-sys-color-secondary: #625b71;
  --md-sys-color-on-secondary: #ffffff;
  --md-sys-color-secondary-container: #e8def8;
  --md-sys-color-on-secondary-container: #1d192b;

  // Tertiary colors
  --md-sys-color-tertiary: #7d5260;
  --md-sys-color-on-tertiary: #ffffff;
  --md-sys-color-tertiary-container: #ffd8e4;
  --md-sys-color-on-tertiary-container: #31111d;

  // Error colors
  --md-sys-color-error: #b3261e;
  --md-sys-color-on-error: #ffffff;
  --md-sys-color-error-container: #f9dedc;
  --md-sys-color-on-error-container: #410e0b;

  // Elevation shadows
  --md-sys-elevation-0: none;
  --md-sys-elevation-1: 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-sys-elevation-2: 0 1px 2px rgba(0, 0, 0, 0.3), 0 2px 6px 2px rgba(0, 0, 0, 0.15);
  --md-sys-elevation-3: 0 4px 8px 3px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.3);
  --md-sys-elevation-4: 0 6px 10px 4px rgba(0, 0, 0, 0.15), 0 2px 3px rgba(0, 0, 0, 0.3);
  --md-sys-elevation-5: 0 8px 12px 6px rgba(0, 0, 0, 0.15), 0 4px 4px rgba(0, 0, 0, 0.3);

  // Shape (corner radius)
  --md-sys-shape-corner-none: 0;
  --md-sys-shape-corner-extra-small: 4px;
  --md-sys-shape-corner-small: 8px;
  --md-sys-shape-corner-medium: 12px;
  --md-sys-shape-corner-large: 16px;
  --md-sys-shape-corner-extra-large: 28px;
  --md-sys-shape-corner-full: 50%;
}

// M3 Component Customizations
.mat-mdc-card {
  border-radius: var(--md-sys-shape-corner-medium);
  box-shadow: var(--md-sys-elevation-1);

  &.elevated {
    box-shadow: var(--md-sys-elevation-2);
  }
}

.mat-mdc-button, .mat-mdc-raised-button, .mat-mdc-flat-button {
  border-radius: var(--md-sys-shape-corner-extra-large);
  min-width: 48px;
  min-height: 48px;
}

.mat-mdc-form-field {
  &.mat-form-field-appearance-outline {
    .mat-mdc-text-field-wrapper {
      border-radius: var(--md-sys-shape-corner-extra-small);
    }
  }
}

// Accessibility: Respect motion preferences
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

// Accessibility: High contrast mode support
@media (prefers-contrast: high) {
  .mat-mdc-button, .mat-mdc-raised-button {
    border: 2px solid currentColor;
  }
}
