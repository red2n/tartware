###############################################################################
# RESERVATIONS SERVICE - Booking Management
# Routes via API Gateway (localhost:8080) -> core-service (port 3000)
#
# Content: Reservation Listing and Filtering (READ OPERATIONS)
#
# WRITE OPERATIONS: All reservation write operations go through the
# Command Center. See command-center.http for:
#   - reservation.create
#   - reservation.modify
#   - reservation.cancel
#   - reservation.check_in
#   - reservation.check_out
#   - reservation.assign_room
#   - reservation.unassign_room
#   - reservation.extend_stay
#   - reservation.rate_override
#   - reservation.add_deposit
#   - reservation.release_deposit
#
# Related files:
# - command-center.http - Write operations (commands)
# - guests.http - Guest profiles
# - rooms.http - Room inventory
# - rates.http - Rate plans
# - billing.http - Payments
###############################################################################

# --- VARIABLES ---
@baseUrl = http://localhost:8080
@tenantId = 11111111-1111-1111-1111-111111111111
@propertyId = 22222222-2222-2222-2222-222222222222
@roomTypeId = 44444444-4444-4444-4444-444444444444
@room101Id = 55555555-5555-5555-5555-555555555551

###############################################################################
# 1. LOGIN
###############################################################################

# @name login
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "username": "setup.admin",
  "password": "TempPass123"
}

### Extract token
@authToken = {{login.response.body.access_token}}

###############################################################################
# 2. RESERVATIONS - LIST WITH FILTERS
###############################################################################

# List all reservations for tenant
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&limit=50
Authorization: Bearer {{authToken}}

###
# List reservations for specific property
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&property_id={{propertyId}}&limit=50
Authorization: Bearer {{authToken}}

###
# Filter by status - CONFIRMED
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=confirmed
Authorization: Bearer {{authToken}}

###
# Filter by status - CHECKED_IN
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=checked_in
Authorization: Bearer {{authToken}}

###
# Filter by status - CHECKED_OUT
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=checked_out
Authorization: Bearer {{authToken}}

###
# Filter by status - PENDING
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=pending
Authorization: Bearer {{authToken}}

###
# Filter by status - CANCELLED
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=cancelled
Authorization: Bearer {{authToken}}

###
# Filter by status - NO_SHOW
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&status=no_show
Authorization: Bearer {{authToken}}

###
# Filter by guest_id
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&guest_id={{guestId}}
Authorization: Bearer {{authToken}}

###
# Filter by room_type_id
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&room_type_id={{roomTypeId}}
Authorization: Bearer {{authToken}}

###
# Filter by date range (check_in)
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&check_in_from=2026-01-30&check_in_to=2026-02-05
Authorization: Bearer {{authToken}}

###
# Filter by date range (check_out)
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&check_out_from=2026-02-01&check_out_to=2026-02-15
Authorization: Bearer {{authToken}}

###
# Combine property and status filters
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&property_id={{propertyId}}&status=confirmed
Authorization: Bearer {{authToken}}

###
# Get larger batch of reservations
GET {{baseUrl}}/v1/reservations?tenant_id={{tenantId}}&limit=200
Authorization: Bearer {{authToken}}

###############################################################################
# REFERENCE
###############################################################################
#
# RESERVATION STATUSES (for filtering):
#   pending, confirmed, checked_in, checked_out, cancelled, no_show
#
# BOOKING SOURCES:
#   DIRECT, OTA, GDS, CORPORATE, WALK_IN, PHONE, EMAIL
#
# BOOKING CHANNELS:
#   WEB, MOBILE, PHONE, WALK_IN, BOOKING_COM, EXPEDIA, AIRBNB
#
# PAYMENT METHODS:
#   CREDIT_CARD, DEBIT_CARD, CASH, BANK_TRANSFER, INVOICE, VIRTUAL_CARD
#
# WRITE OPERATIONS:
#   All reservation write operations go through the Command Center.
#   See command-center.http for full examples of:
#     POST /v1/commands/reservation.create/execute
#     POST /v1/commands/reservation.modify/execute
#     POST /v1/commands/reservation.cancel/execute
#     POST /v1/commands/reservation.check_in/execute
#     POST /v1/commands/reservation.check_out/execute
#     POST /v1/commands/reservation.assign_room/execute
#     POST /v1/commands/reservation.unassign_room/execute
#     POST /v1/commands/reservation.extend_stay/execute
#     POST /v1/commands/reservation.rate_override/execute
#     POST /v1/commands/reservation.add_deposit/execute
#     POST /v1/commands/reservation.release_deposit/execute
#
# SAMPLE IDs:
#   Tenant:    11111111-1111-1111-1111-111111111111
#   Property:  22222222-2222-2222-2222-222222222222
#   Room Type: 44444444-4444-4444-4444-444444444444
#   Room 101:  55555555-5555-5555-5555-555555555551
#
###############################################################################
