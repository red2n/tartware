###############################################################################
# HOUSEKEEPING SERVICE - Task Management
# Routes via API Gateway (localhost:8080) -> housekeeping-service (port 3500)
#
# Content: Housekeeping Tasks Listing and Filtering (READ OPERATIONS)
#
# WRITE OPERATIONS: All housekeeping write operations go through the
# Command Center. See command-center.http for:
#   - housekeeping.task.create
#   - housekeeping.task.assign
#   - housekeeping.task.complete
#   - housekeeping.task.reassign
#   - housekeeping.task.reopen
#   - housekeeping.task.add_note
#   - housekeeping.task.bulk_status
#
# Related files:
# - command-center.http - Write operations (commands)
# - operations.http - Maintenance requests and incident reports
# - rooms.http - Room status updates
###############################################################################

# --- VARIABLES ---
@baseUrl = http://localhost:8080
@tenantId = 11111111-1111-1111-1111-111111111111
@propertyId = 22222222-2222-2222-2222-222222222222
@room101Id = 55555555-5555-5555-5555-555555555551

###############################################################################
# 1. LOGIN
###############################################################################

# @name login
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "username": "setup.admin",
  "password": "TempPass123"
}

### Extract token
@authToken = {{login.response.body.access_token}}

###############################################################################
# 2. HOUSEKEEPING TASKS - LIST WITH FILTERS
###############################################################################

# List all housekeeping tasks for tenant
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&limit=50
Authorization: Bearer {{authToken}}

###
# List tasks for specific property
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&property_id={{propertyId}}&limit=50
Authorization: Bearer {{authToken}}

###
# Filter by housekeeping status - CLEAN
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&status=clean
Authorization: Bearer {{authToken}}

###
# Filter by housekeeping status - DIRTY
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&status=dirty
Authorization: Bearer {{authToken}}

###
# Filter by housekeeping status - INSPECTED
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&status=inspected
Authorization: Bearer {{authToken}}

###
# Filter by housekeeping status - IN_PROGRESS
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&status=in_progress
Authorization: Bearer {{authToken}}

###
# Filter by scheduled date (today)
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&scheduled_date=2026-02-03
Authorization: Bearer {{authToken}}

###
# Combine property and status filters
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&property_id={{propertyId}}&status=dirty
Authorization: Bearer {{authToken}}

###
# Combine property, status, and date filters
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&property_id={{propertyId}}&status=dirty&scheduled_date=2026-02-03
Authorization: Bearer {{authToken}}

###
# Get large batch of tasks
GET {{baseUrl}}/v1/housekeeping/tasks?tenant_id={{tenantId}}&limit=200
Authorization: Bearer {{authToken}}

###############################################################################
# REFERENCE
###############################################################################
#
# HOUSEKEEPING STATUSES (for filtering):
#   clean, dirty, inspected, in_progress
#
# TASK TYPES (for command center):
#   CHECKOUT_CLEANING - Post-checkout deep clean
#   STAYOVER_CLEANING - Daily cleaning during stay
#   TURNDOWN          - Evening turndown service
#   INSPECTION        - Room inspection
#   DEEP_CLEANING     - Periodic deep clean
#   MAINTENANCE       - Minor maintenance
#   SPECIAL_REQUEST   - Guest special request
#
# TASK STATUSES (command center):
#   PENDING, ASSIGNED, IN_PROGRESS, COMPLETED, CANCELLED
#
# PRIORITIES:
#   LOW, MEDIUM, HIGH, URGENT
#
# WRITE OPERATIONS:
#   All housekeeping write operations go through the Command Center.
#   See command-center.http for full examples of:
#     POST /v1/commands/housekeeping.task.create/execute
#     POST /v1/commands/housekeeping.task.assign/execute
#     POST /v1/commands/housekeeping.task.complete/execute
#     POST /v1/commands/housekeeping.task.reassign/execute
#     POST /v1/commands/housekeeping.task.reopen/execute
#     POST /v1/commands/housekeeping.task.add_note/execute
#     POST /v1/commands/housekeeping.task.bulk_status/execute
#
# NOTE: The housekeeping-service module requires the 'facility-maintenance'
#       module to be enabled for the tenant.
#
# SAMPLE IDs:
#   Tenant:   11111111-1111-1111-1111-111111111111
#   Property: 22222222-2222-2222-2222-222222222222
#   Room 101: 55555555-5555-5555-5555-555555555551
#
###############################################################################
