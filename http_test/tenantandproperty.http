###############################################################################
# TENANTS & PROPERTIES - Organization Management
# Routes via API Gateway (localhost:8080) -> core-service (port 3000)
#
# Content: Tenants, Properties, Dashboard Stats
#
# Related files:
# - core-service.http - Users and authentication
# - modules.http - Module management
###############################################################################

# --- VARIABLES ---
@baseUrl = http://localhost:8080
@tenantId = 11111111-1111-1111-1111-111111111111
@propertyId = 22222222-2222-2222-2222-222222222222

###############################################################################
# 1. LOGIN
###############################################################################

# @name login
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "username": "setup.admin",
  "password": "TempPass123"
}

### Extract token
@authToken = {{login.response.body.access_token}}

###############################################################################
# 2. TENANTS - READ
###############################################################################

# List all tenants accessible to user
GET {{baseUrl}}/v1/tenants
Authorization: Bearer {{authToken}}

###
# List with pagination
GET {{baseUrl}}/v1/tenants?limit=10&offset=0
Authorization: Bearer {{authToken}}

###############################################################################
# 3. PROPERTIES - READ
###############################################################################

# List properties for tenant
GET {{baseUrl}}/v1/properties?tenant_id={{tenantId}}&limit=50
Authorization: Bearer {{authToken}}

###############################################################################
# 4. PROPERTIES - CREATE
###############################################################################

# @name createProperty
# Create a new property
POST {{baseUrl}}/v1/properties
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "tenant_id": "{{tenantId}}",
  "property_name": "Tartware Beach Resort",
  "property_code": "TBR",
  "property_type": "RESORT",
  "star_rating": 4,
  "total_rooms": 150,
  "phone": "+1-555-0300",
  "email": "info@tartware-beach.demo",
  "website": "https://beach.tartware.demo",
  "address": {
    "line1": "100 Ocean Drive",
    "city": "Miami",
    "state": "FL",
    "postal_code": "33139",
    "country": "US"
  },
  "currency": "USD",
  "timezone": "America/New_York"
}

### Extract created property ID
@newPropertyId = {{createProperty.response.body.id}}

###
# Create boutique hotel
POST {{baseUrl}}/v1/properties
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "tenant_id": "{{tenantId}}",
  "property_name": "Tartware Boutique Downtown",
  "property_code": "TBD",
  "property_type": "BOUTIQUE",
  "star_rating": 5,
  "total_rooms": 45,
  "phone": "+1-555-0400",
  "email": "info@tartware-boutique.demo",
  "website": "https://boutique.tartware.demo",
  "address": {
    "line1": "50 Fashion District Lane",
    "city": "New York",
    "state": "NY",
    "postal_code": "10001",
    "country": "US"
  },
  "currency": "USD",
  "timezone": "America/New_York"
}

###############################################################################
# 5. DASHBOARD - STATS & ACTIVITY
###############################################################################

# Get dashboard statistics
GET {{baseUrl}}/v1/dashboard/stats?tenant_id={{tenantId}}
Authorization: Bearer {{authToken}}

###
# Get stats for specific property
GET {{baseUrl}}/v1/dashboard/stats?tenant_id={{tenantId}}&property_id={{propertyId}}
Authorization: Bearer {{authToken}}

###
# Get recent activity feed
GET {{baseUrl}}/v1/dashboard/activity?tenant_id={{tenantId}}&limit=20
Authorization: Bearer {{authToken}}

###
# Get activity for specific property
GET {{baseUrl}}/v1/dashboard/activity?tenant_id={{tenantId}}&property_id={{propertyId}}&limit=10
Authorization: Bearer {{authToken}}

###
# Get upcoming tasks
GET {{baseUrl}}/v1/dashboard/tasks?tenant_id={{tenantId}}&limit=10
Authorization: Bearer {{authToken}}

###
# Get tasks for specific property
GET {{baseUrl}}/v1/dashboard/tasks?tenant_id={{tenantId}}&property_id={{propertyId}}&limit=10
Authorization: Bearer {{authToken}}

###############################################################################
# REFERENCE
###############################################################################
#
# PROPERTY TYPES:
#   HOTEL, RESORT, BOUTIQUE, MOTEL, HOSTEL, BED_AND_BREAKFAST,
#   APARTMENT, VILLA, CABIN, CASTLE
#
# STAR RATINGS: 1-5
#
# SUBSCRIPTION PLANS:
#   STARTER, PROFESSIONAL, ENTERPRISE
#
# TENANT STATUSES:
#   ACTIVE, SUSPENDED, PENDING, INACTIVE
#
# SAMPLE IDs:
#   Tenant:   11111111-1111-1111-1111-111111111111 (Tartware Hospitality Labs)
#   Property: 22222222-2222-2222-2222-222222222222 (Tartware City Center)
#
###############################################################################
